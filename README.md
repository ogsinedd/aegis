# AEGIS

AEGIS - система для управления уязвимостями в Docker-контейнерах, разработанная для мониторинга, анализа и управления безопасностью контейнеризованных приложений.

## Возможности

- **Мониторинг Docker-контейнеров**: Автоматическое отслеживание всех Docker-контейнеров в реальном времени
- **Сканирование уязвимостей**: Выявление уязвимостей в образах Docker с детальной информацией о критичности
- **Планирование обновлений**: Создание и управление планами по обновлению контейнеров и исправлению уязвимостей
- **Настраиваемые хуки**: Интеграция с внешними системами (Slack, Email, Webhook) для оповещений
- **Пользовательский интерфейс**: Современный темный интерфейс с изумрудной акцентной темой

## Системные требования

- Docker Engine 20.10+
- Доступ к Docker Socket
- 2 ГБ свободной оперативной памяти
- 1 ГБ свободного места на диске
- Поддерживаемые ОС: Linux, macOS, Windows с Docker Desktop

## Запуск

### Стандартный запуск

```bash
docker-compose up -d
```

Доступ:
- Веб-интерфейс: http://localhost:3001
- API: http://localhost:8080/v1

### Работа с macOS

На macOS Docker socket может находиться в нестандартном месте. AEGIS автоматически определяет расположение сокета Docker и использует путь `/run/host-services/docker.sock`, который обеспечивает доступ к Docker API на системах macOS с Apple Silicon.

## Руководство пользователя

### Начало работы

После запуска системы откройте веб-интерфейс по адресу http://localhost:3001. Вы увидите панель управления с основной статистикой по контейнерам и уязвимостям.

### Контейнеры

Раздел "Контейнеры" отображает все Docker-контейнеры в вашей системе:

1. **Просмотр списка контейнеров**: Основная таблица содержит имя, статус, образ и информацию о последнем сканировании
2. **Фильтрация и поиск**: 
   - Используйте строку поиска для фильтрации по имени или образу
   - Применяйте фильтры по статусу и наличию уязвимостей
   - Сортируйте по имени или количеству уязвимостей
3. **Управление контейнерами**:
   - Нажмите на имя контейнера для перехода к детальной информации
   - Кнопка "Сканировать" запускает анализ уязвимостей для выбранного контейнера

### Уязвимости

Раздел "Уязвимости" отображает все найденные уязвимости в контейнерах:

1. **Просмотр списка уязвимостей**: Таблица содержит ID, контейнер, компонент, версию и уровень критичности
2. **Фильтрация уязвимостей**:
   - Фильтры по критичности (Critical, High, Medium, Low)
   - Фильтры по контейнерам
   - Поиск по ID, описанию или затрагиваемому компоненту
3. **Анализ уязвимостей**:
   - Нажатие на уязвимость открывает детальную информацию
   - Доступны рекомендации по исправлению и ссылки на подробные описания

### План исправлений

Раздел "План" позволяет управлять исправлением уязвимостей:

1. **Создание плана**: Выберите контейнеры и уязвимости для исправления
2. **Планирование**: Установите дату и время применения исправлений
3. **Выполнение**: Запустите план вручную или дождитесь его автоматического выполнения
4. **Мониторинг**: Отслеживайте статус выполнения задач по исправлению

### Хуки

Раздел "Hooks" позволяет настраивать интеграции с внешними системами:

1. **Типы хуков**:
   - Slack для отправки уведомлений
   - Email для оповещений по электронной почте
   - Webhook для интеграции с другими системами
2. **Настройка триггеров**:
   - Обнаружение новых уязвимостей
   - Изменение статуса контейнеров
   - Выполнение задач плана исправлений

## Работа с API

API AEGIS доступен по адресу http://localhost:8080/v1 и предоставляет следующие эндпоинты:

### Контейнеры
- `GET /containers` - получение списка всех контейнеров
- `GET /containers/{id}` - получение информации о конкретном контейнере
- `GET /containers/{id}/scan` - запуск сканирования контейнера на уязвимости

### Уязвимости
- `GET /vulnerabilities` - получение списка всех уязвимостей
- `GET /vulnerabilities/{id}` - получение информации о конкретной уязвимости
- `GET /vulnerabilities?container_id={id}` - получение уязвимостей для конкретного контейнера
- `GET /vulnerabilities?severity={severity}` - фильтрация уязвимостей по критичности

### План исправлений
- `GET /plan` - генерация плана исправления уязвимостей
- `GET /plan/status` - получение статуса текущего плана исправлений
- `POST /plan/execute` - запуск выполнения плана

Документация API доступна по адресу: http://localhost:8080/docs

### Аутентификация
API не требует аутентификации в текущей версии, так как предназначено для локального использования.

Пример запроса для получения списка контейнеров:
```bash
curl http://localhost:8080/v1/containers
```

Пример фильтрации уязвимостей по критичности:
```bash
curl http://localhost:8080/v1/vulnerabilities?severity=Critical
```

## Устранение неполадок

### Проблемы с доступом к Docker API

1. Убедитесь, что Docker Engine работает:
   ```bash
   docker ps
   ```

2. Проверьте доступ к Docker socket:
   ```bash
   ls -la /var/run/docker.sock
   ```

3. Для Mac с Apple Silicon проверьте доступ к сокету:
   ```bash
   ls -la /run/host-services/docker.sock
   ```

### Перезапуск системы

Если необходимо перезапустить систему:

```bash
docker-compose down
docker-compose up -d
```

## Лицензия

Проект распространяется под лицензией MIT. См. файл LICENSE для подробностей.
